2025-03-06 13:45:42,767 - INFO - Starting application with directories:
2025-03-06 13:45:42,768 - INFO - Upload directory: /Users/alan/code/audio-jam/src/backend/temp/uploads
2025-03-06 13:45:42,768 - INFO - Output directory: /Users/alan/code/audio-jam/src/backend/temp/separated
2025-03-06 13:45:43,030 - INFO - Model loaded successfully. Using device: cpu
2025-03-06 13:45:59,187 - DEBUG - Calling on_part_begin with no data
2025-03-06 13:45:59,188 - DEBUG - Calling on_header_field with data[42:61]
2025-03-06 13:45:59,188 - DEBUG - Calling on_header_value with data[63:107]
2025-03-06 13:45:59,188 - DEBUG - Calling on_header_end with no data
2025-03-06 13:45:59,188 - DEBUG - Calling on_header_field with data[109:121]
2025-03-06 13:45:59,188 - DEBUG - Calling on_header_value with data[123:133]
2025-03-06 13:45:59,188 - DEBUG - Calling on_header_end with no data
2025-03-06 13:45:59,188 - DEBUG - Calling on_headers_finished with no data
2025-03-06 13:45:59,189 - DEBUG - Calling on_part_data with data[137:97721]
2025-03-06 13:45:59,189 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,189 - DEBUG - Calling on_part_data with data[97722:162282]
2025-03-06 13:45:59,189 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,190 - DEBUG - Calling on_part_data with data[162283:261419]
2025-03-06 13:45:59,191 - DEBUG - Calling on_part_data with data[0:53363]
2025-03-06 13:45:59,191 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,191 - DEBUG - Calling on_part_data with data[53364:262144]
2025-03-06 13:45:59,192 - DEBUG - Calling on_part_data with data[0:30858]
2025-03-06 13:45:59,192 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,192 - DEBUG - Calling on_part_data with data[30859:34905]
2025-03-06 13:45:59,192 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,192 - DEBUG - Calling on_part_data with data[34906:79959]
2025-03-06 13:45:59,192 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,193 - DEBUG - Calling on_part_data with data[79960:171287]
2025-03-06 13:45:59,193 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,193 - DEBUG - Calling on_part_data with data[171288:262144]
2025-03-06 13:45:59,193 - DEBUG - Calling on_part_data with data[0:11502]
2025-03-06 13:45:59,193 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,193 - DEBUG - Calling on_part_data with data[11503:115268]
2025-03-06 13:45:59,193 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,194 - DEBUG - Calling on_part_data with data[115269:139362]
2025-03-06 13:45:59,194 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,194 - DEBUG - Calling on_part_data with data[139363:159129]
2025-03-06 13:45:59,194 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,194 - DEBUG - Calling on_part_data with data[159130:262144]
2025-03-06 13:45:59,195 - DEBUG - Calling on_part_data with data[0:184795]
2025-03-06 13:45:59,195 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,195 - DEBUG - Calling on_part_data with data[184796:197227]
2025-03-06 13:45:59,195 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,195 - DEBUG - Calling on_part_data with data[197228:236625]
2025-03-06 13:45:59,195 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,195 - DEBUG - Calling on_part_data with data[236626:262144]
2025-03-06 13:45:59,222 - DEBUG - Calling on_part_data with data[0:36031]
2025-03-06 13:45:59,222 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,222 - DEBUG - Calling on_part_data with data[36032:41469]
2025-03-06 13:45:59,222 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,223 - DEBUG - Calling on_part_data with data[41470:138305]
2025-03-06 13:45:59,223 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,223 - DEBUG - Calling on_part_data with data[138306:186990]
2025-03-06 13:45:59,223 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,224 - DEBUG - Calling on_part_data with data[186991:232357]
2025-03-06 13:45:59,224 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,224 - DEBUG - Calling on_part_data with data[232358:254151]
2025-03-06 13:45:59,224 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,224 - DEBUG - Calling on_part_data with data[254152:262144]
2025-03-06 13:45:59,227 - DEBUG - Calling on_part_data with data[0:166013]
2025-03-06 13:45:59,227 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,227 - DEBUG - Calling on_part_data with data[166014:262144]
2025-03-06 13:45:59,231 - DEBUG - Calling on_part_data with data[0:71609]
2025-03-06 13:45:59,231 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,231 - DEBUG - Calling on_part_data with data[71610:116132]
2025-03-06 13:45:59,231 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,231 - DEBUG - Calling on_part_data with data[116133:186943]
2025-03-06 13:45:59,231 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,232 - DEBUG - Calling on_part_data with data[186944:194184]
2025-03-06 13:45:59,232 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,232 - DEBUG - Calling on_part_data with data[194185:262144]
2025-03-06 13:45:59,233 - DEBUG - Calling on_part_data with data[0:14128]
2025-03-06 13:45:59,233 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,234 - DEBUG - Calling on_part_data with data[14129:172039]
2025-03-06 13:45:59,234 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,234 - DEBUG - Calling on_part_data with data[172040:189206]
2025-03-06 13:45:59,234 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,234 - DEBUG - Calling on_part_data with data[189207:231679]
2025-03-06 13:45:59,234 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,234 - DEBUG - Calling on_part_data with data[231680:243729]
2025-03-06 13:45:59,234 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,234 - DEBUG - Calling on_part_data with data[243730:254261]
2025-03-06 13:45:59,234 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,234 - DEBUG - Calling on_part_data with data[254262:257214]
2025-03-06 13:45:59,234 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,235 - DEBUG - Calling on_part_data with data[257215:262144]
2025-03-06 13:45:59,237 - DEBUG - Calling on_part_data with data[0:20610]
2025-03-06 13:45:59,237 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,237 - DEBUG - Calling on_part_data with data[20611:39499]
2025-03-06 13:45:59,237 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,237 - DEBUG - Calling on_part_data with data[39500:51934]
2025-03-06 13:45:59,237 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,237 - DEBUG - Calling on_part_data with data[51935:129107]
2025-03-06 13:45:59,237 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,238 - DEBUG - Calling on_part_data with data[129108:262108]
2025-03-06 13:45:59,238 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,238 - DEBUG - Calling on_part_data with data[262109:262142]
2025-03-06 13:45:59,238 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,238 - DEBUG - Calling on_part_data with data[262143:262144]
2025-03-06 13:45:59,244 - DEBUG - Calling on_part_data with data[0:200076]
2025-03-06 13:45:59,244 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,244 - DEBUG - Calling on_part_data with data[200077:252077]
2025-03-06 13:45:59,244 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,244 - DEBUG - Calling on_part_data with data[252078:262134]
2025-03-06 13:45:59,244 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,244 - DEBUG - Calling on_part_data with data[262135:262144]
2025-03-06 13:45:59,245 - DEBUG - Calling on_part_data with data[0:14283]
2025-03-06 13:45:59,245 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,245 - DEBUG - Calling on_part_data with data[14284:58799]
2025-03-06 13:45:59,245 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,246 - DEBUG - Calling on_part_data with data[58800:131450]
2025-03-06 13:45:59,246 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,246 - DEBUG - Calling on_part_data with data[131451:142111]
2025-03-06 13:45:59,246 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,246 - DEBUG - Calling on_part_data with data[142112:262144]
2025-03-06 13:45:59,249 - DEBUG - Calling on_part_data with data[0:42]
2025-03-06 13:45:59,249 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,249 - DEBUG - Calling on_part_data with data[43:4383]
2025-03-06 13:45:59,249 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:45:59,249 - DEBUG - Calling on_part_data with data[4384:88092]
2025-03-06 13:45:59,249 - DEBUG - Calling on_part_end with no data
2025-03-06 13:45:59,249 - DEBUG - Calling on_end with no data
2025-03-06 13:45:59,252 - INFO - Received audio file: test.mp3
2025-03-06 13:45:59,252 - DEBUG - Created directories - Input: temp/uploads/2caaef37-2bfa-4aae-8ca6-60c6553814b3.wav, Output: temp/separated/2caaef37-2bfa-4aae-8ca6-60c6553814b3
2025-03-06 13:45:59,253 - DEBUG - Read file content, size: 3232958 bytes
2025-03-06 13:45:59,257 - INFO - Saved uploaded file to temp/uploads/2caaef37-2bfa-4aae-8ca6-60c6553814b3.wav
2025-03-06 13:46:00,550 - DEBUG - Audio file loaded successfully, shape: torch.Size([1, 2, 8908200])
2025-03-06 13:46:00,551 - INFO - Starting audio separation...
2025-03-06 13:47:30,809 - INFO - Audio separation completed successfully
2025-03-06 13:47:30,819 - ERROR - Error saving track drums: 'AudioFile' object has no attribute 'write'
2025-03-06 13:47:30,820 - ERROR - Unexpected error: 
Traceback (most recent call last):
  File "/Users/alan/code/audio-jam/src/backend/main.py", line 97, in separate_audio
    AudioFile(out_path).write(audio, model.samplerate)
AttributeError: 'AudioFile' object has no attribute 'write'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/alan/code/audio-jam/src/backend/main.py", line 102, in separate_audio
    raise HTTPException(status_code=500, detail=f"保存音轨 {source} 失败")
fastapi.exceptions.HTTPException
2025-03-06 13:47:30,852 - DEBUG - Cleaned up input file: temp/uploads/2caaef37-2bfa-4aae-8ca6-60c6553814b3.wav
2025-03-06 13:48:39,246 - INFO - Starting application with directories:
2025-03-06 13:48:39,246 - INFO - Upload directory: /Users/alan/code/audio-jam/src/backend/temp/uploads
2025-03-06 13:48:39,246 - INFO - Output directory: /Users/alan/code/audio-jam/src/backend/temp/separated
2025-03-06 13:48:39,442 - INFO - Model loaded successfully. Using device: cpu
2025-03-06 13:48:53,558 - DEBUG - Calling on_part_begin with no data
2025-03-06 13:48:53,559 - DEBUG - Calling on_header_field with data[42:61]
2025-03-06 13:48:53,559 - DEBUG - Calling on_header_value with data[63:107]
2025-03-06 13:48:53,559 - DEBUG - Calling on_header_end with no data
2025-03-06 13:48:53,560 - DEBUG - Calling on_header_field with data[109:121]
2025-03-06 13:48:53,560 - DEBUG - Calling on_header_value with data[123:133]
2025-03-06 13:48:53,560 - DEBUG - Calling on_header_end with no data
2025-03-06 13:48:53,560 - DEBUG - Calling on_headers_finished with no data
2025-03-06 13:48:53,560 - DEBUG - Calling on_part_data with data[137:97949]
2025-03-06 13:48:53,560 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,560 - DEBUG - Calling on_part_data with data[97950:174992]
2025-03-06 13:48:53,560 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,561 - DEBUG - Calling on_part_data with data[174993:261419]
2025-03-06 13:48:53,562 - DEBUG - Calling on_part_data with data[0:223767]
2025-03-06 13:48:53,562 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,562 - DEBUG - Calling on_part_data with data[223768:262144]
2025-03-06 13:48:53,563 - DEBUG - Calling on_part_data with data[0:82645]
2025-03-06 13:48:53,600 - DEBUG - Calling on_part_data with data[0:49152]
2025-03-06 13:48:53,909 - DEBUG - Calling on_part_data with data[0:87503]
2025-03-06 13:48:53,909 - DEBUG - Calling on_part_data with data[0:2]
2025-03-06 13:48:53,909 - DEBUG - Calling on_part_data with data[87505:98304]
2025-03-06 13:48:53,910 - DEBUG - Calling on_part_data with data[0:44422]
2025-03-06 13:48:53,910 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,911 - DEBUG - Calling on_part_data with data[44423:71426]
2025-03-06 13:48:53,911 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,912 - DEBUG - Calling on_part_data with data[71427:220031]
2025-03-06 13:48:53,912 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,912 - DEBUG - Calling on_part_data with data[220032:262144]
2025-03-06 13:48:53,913 - DEBUG - Calling on_part_data with data[0:75118]
2025-03-06 13:48:53,914 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,915 - DEBUG - Calling on_part_data with data[75119:124005]
2025-03-06 13:48:53,915 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,916 - DEBUG - Calling on_part_data with data[124006:262144]
2025-03-06 13:48:53,926 - DEBUG - Calling on_part_data with data[0:73930]
2025-03-06 13:48:53,926 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,926 - DEBUG - Calling on_part_data with data[73931:128690]
2025-03-06 13:48:53,926 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,926 - DEBUG - Calling on_part_data with data[128691:170930]
2025-03-06 13:48:53,926 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,927 - DEBUG - Calling on_part_data with data[170931:262144]
2025-03-06 13:48:53,928 - DEBUG - Calling on_part_data with data[0:67886]
2025-03-06 13:48:53,928 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,929 - DEBUG - Calling on_part_data with data[67887:85967]
2025-03-06 13:48:53,929 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,929 - DEBUG - Calling on_part_data with data[85968:90853]
2025-03-06 13:48:53,929 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,929 - DEBUG - Calling on_part_data with data[90854:164125]
2025-03-06 13:48:53,929 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,930 - DEBUG - Calling on_part_data with data[164126:253927]
2025-03-06 13:48:53,930 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,930 - DEBUG - Calling on_part_data with data[253928:262144]
2025-03-06 13:48:53,932 - DEBUG - Calling on_part_data with data[0:23730]
2025-03-06 13:48:53,932 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,933 - DEBUG - Calling on_part_data with data[23731:262144]
2025-03-06 13:48:53,935 - DEBUG - Calling on_part_data with data[0:118513]
2025-03-06 13:48:53,935 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,936 - DEBUG - Calling on_part_data with data[118514:262144]
2025-03-06 13:48:53,937 - DEBUG - Calling on_part_data with data[0:253934]
2025-03-06 13:48:53,937 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,937 - DEBUG - Calling on_part_data with data[253935:258571]
2025-03-06 13:48:53,937 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,937 - DEBUG - Calling on_part_data with data[258572:262144]
2025-03-06 13:48:53,938 - DEBUG - Calling on_part_data with data[0:378]
2025-03-06 13:48:53,938 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,939 - DEBUG - Calling on_part_data with data[379:191057]
2025-03-06 13:48:53,939 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,939 - DEBUG - Calling on_part_data with data[191058:196833]
2025-03-06 13:48:53,939 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,939 - DEBUG - Calling on_part_data with data[196834:228811]
2025-03-06 13:48:53,939 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,939 - DEBUG - Calling on_part_data with data[228812:257359]
2025-03-06 13:48:53,939 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,940 - DEBUG - Calling on_part_data with data[257360:262144]
2025-03-06 13:48:53,941 - DEBUG - Calling on_part_data with data[0:23587]
2025-03-06 13:48:53,941 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,942 - DEBUG - Calling on_part_data with data[23588:66451]
2025-03-06 13:48:53,942 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,942 - DEBUG - Calling on_part_data with data[66452:98351]
2025-03-06 13:48:53,942 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,942 - DEBUG - Calling on_part_data with data[98352:200546]
2025-03-06 13:48:53,942 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,942 - DEBUG - Calling on_part_data with data[200547:262144]
2025-03-06 13:48:53,944 - DEBUG - Calling on_part_data with data[0:61514]
2025-03-06 13:48:53,944 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,944 - DEBUG - Calling on_part_data with data[61515:119733]
2025-03-06 13:48:53,944 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:48:53,944 - DEBUG - Calling on_part_data with data[119734:120135]
2025-03-06 13:48:53,944 - DEBUG - Calling on_part_end with no data
2025-03-06 13:48:53,944 - DEBUG - Calling on_end with no data
2025-03-06 13:48:53,946 - INFO - Received audio file: test.mp3
2025-03-06 13:48:53,947 - DEBUG - Created directories - Input: temp/uploads/9f686e66-d17c-407f-8baf-57eec9bf318c.wav, Output: temp/separated/9f686e66-d17c-407f-8baf-57eec9bf318c
2025-03-06 13:48:53,948 - DEBUG - Read file content, size: 3232958 bytes
2025-03-06 13:48:53,949 - INFO - Saved uploaded file to temp/uploads/9f686e66-d17c-407f-8baf-57eec9bf318c.wav
2025-03-06 13:48:54,592 - DEBUG - Audio file loaded successfully, shape: torch.Size([1, 2, 8908200])
2025-03-06 13:48:54,592 - INFO - Starting audio separation...
2025-03-06 13:50:27,514 - INFO - Audio separation completed successfully
2025-03-06 13:50:27,519 - ERROR - Error saving track drums: Expected 2D Tensor, got 3D.
2025-03-06 13:50:27,519 - ERROR - Unexpected error: 
Traceback (most recent call last):
  File "/Users/alan/code/audio-jam/src/backend/main.py", line 102, in separate_audio
    torchaudio.save(out_path, audio, model.samplerate)
  File "/opt/anaconda3/envs/audio-env/lib/python3.9/site-packages/torchaudio/_backend/utils.py", line 313, in save
    return backend.save(
  File "/opt/anaconda3/envs/audio-env/lib/python3.9/site-packages/torchaudio/_backend/soundfile.py", line 44, in save
    soundfile_backend.save(
  File "/opt/anaconda3/envs/audio-env/lib/python3.9/site-packages/torchaudio/_backend/soundfile_backend.py", line 427, in save
    raise ValueError(f"Expected 2D Tensor, got {src.ndim}D.")
ValueError: Expected 2D Tensor, got 3D.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/alan/code/audio-jam/src/backend/main.py", line 107, in separate_audio
    raise HTTPException(status_code=500, detail=f"保存音轨 {source} 失败")
fastapi.exceptions.HTTPException
2025-03-06 13:50:27,524 - DEBUG - Cleaned up input file: temp/uploads/9f686e66-d17c-407f-8baf-57eec9bf318c.wav
2025-03-06 13:51:29,453 - INFO - Starting application with directories:
2025-03-06 13:51:29,453 - INFO - Upload directory: /Users/alan/code/audio-jam/src/backend/temp/uploads
2025-03-06 13:51:29,453 - INFO - Output directory: /Users/alan/code/audio-jam/src/backend/temp/separated
2025-03-06 13:51:29,640 - INFO - Model loaded successfully. Using device: cpu
2025-03-06 13:56:00,814 - DEBUG - Calling on_part_begin with no data
2025-03-06 13:56:00,818 - DEBUG - Calling on_header_field with data[42:61]
2025-03-06 13:56:00,818 - DEBUG - Calling on_header_value with data[63:107]
2025-03-06 13:56:00,818 - DEBUG - Calling on_header_end with no data
2025-03-06 13:56:00,818 - DEBUG - Calling on_header_field with data[109:121]
2025-03-06 13:56:00,818 - DEBUG - Calling on_header_value with data[123:133]
2025-03-06 13:56:00,818 - DEBUG - Calling on_header_end with no data
2025-03-06 13:56:00,819 - DEBUG - Calling on_headers_finished with no data
2025-03-06 13:56:00,822 - DEBUG - Calling on_part_data with data[137:71089]
2025-03-06 13:56:00,822 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,822 - DEBUG - Calling on_part_data with data[71090:93175]
2025-03-06 13:56:00,822 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,823 - DEBUG - Calling on_part_data with data[93176:178700]
2025-03-06 13:56:00,823 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,823 - DEBUG - Calling on_part_data with data[178701:213742]
2025-03-06 13:56:00,823 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,823 - DEBUG - Calling on_part_data with data[213743:261419]
2025-03-06 13:56:00,823 - DEBUG - Calling on_part_data with data[0:17323]
2025-03-06 13:56:00,823 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,824 - DEBUG - Calling on_part_data with data[17324:143389]
2025-03-06 13:56:00,824 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,824 - DEBUG - Calling on_part_data with data[143390:254316]
2025-03-06 13:56:00,825 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,825 - DEBUG - Calling on_part_data with data[254317:262144]
2025-03-06 13:56:00,826 - DEBUG - Calling on_part_data with data[0:15839]
2025-03-06 13:56:00,826 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,826 - DEBUG - Calling on_part_data with data[15840:262144]
2025-03-06 13:56:00,826 - DEBUG - Calling on_part_data with data[0:14318]
2025-03-06 13:56:00,826 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,827 - DEBUG - Calling on_part_data with data[14319:115268]
2025-03-06 13:56:00,827 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,827 - DEBUG - Calling on_part_data with data[115269:132294]
2025-03-06 13:56:00,827 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,827 - DEBUG - Calling on_part_data with data[132295:196897]
2025-03-06 13:56:00,827 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,827 - DEBUG - Calling on_part_data with data[196898:202132]
2025-03-06 13:56:00,827 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,827 - DEBUG - Calling on_part_data with data[202133:262144]
2025-03-06 13:56:00,829 - DEBUG - Calling on_part_data with data[0:260194]
2025-03-06 13:56:00,829 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,829 - DEBUG - Calling on_part_data with data[260195:262144]
2025-03-06 13:56:00,847 - DEBUG - Calling on_part_data with data[0:106046]
2025-03-06 13:56:00,847 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,847 - DEBUG - Calling on_part_data with data[106047:254151]
2025-03-06 13:56:00,847 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,847 - DEBUG - Calling on_part_data with data[254152:262144]
2025-03-06 13:56:00,850 - DEBUG - Calling on_part_data with data[0:380]
2025-03-06 13:56:00,850 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,851 - DEBUG - Calling on_part_data with data[381:48291]
2025-03-06 13:56:00,851 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,851 - DEBUG - Calling on_part_data with data[48292:133799]
2025-03-06 13:56:00,851 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,851 - DEBUG - Calling on_part_data with data[133800:162604]
2025-03-06 13:56:00,851 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,851 - DEBUG - Calling on_part_data with data[162605:218554]
2025-03-06 13:56:00,851 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,851 - DEBUG - Calling on_part_data with data[218555:262144]
2025-03-06 13:56:00,856 - DEBUG - Calling on_part_data with data[0:1640]
2025-03-06 13:56:00,856 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,856 - DEBUG - Calling on_part_data with data[1641:114614]
2025-03-06 13:56:00,856 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,857 - DEBUG - Calling on_part_data with data[114615:262144]
2025-03-06 13:56:00,859 - DEBUG - Calling on_part_data with data[0:56163]
2025-03-06 13:56:00,859 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,860 - DEBUG - Calling on_part_data with data[56164:262144]
2025-03-06 13:56:00,862 - DEBUG - Calling on_part_data with data[0:11877]
2025-03-06 13:56:00,862 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,862 - DEBUG - Calling on_part_data with data[11878:22744]
2025-03-06 13:56:00,862 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,862 - DEBUG - Calling on_part_data with data[22745:100723]
2025-03-06 13:56:00,862 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,863 - DEBUG - Calling on_part_data with data[100724:169220]
2025-03-06 13:56:00,863 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,863 - DEBUG - Calling on_part_data with data[169221:220718]
2025-03-06 13:56:00,863 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,863 - DEBUG - Calling on_part_data with data[220719:262108]
2025-03-06 13:56:00,863 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,863 - DEBUG - Calling on_part_data with data[262109:262142]
2025-03-06 13:56:00,863 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,863 - DEBUG - Calling on_part_data with data[262143:262144]
2025-03-06 13:56:00,867 - DEBUG - Calling on_part_data with data[0:99250]
2025-03-06 13:56:00,867 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,867 - DEBUG - Calling on_part_data with data[99251:200076]
2025-03-06 13:56:00,867 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,867 - DEBUG - Calling on_part_data with data[200077:262134]
2025-03-06 13:56:00,867 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,867 - DEBUG - Calling on_part_data with data[262135:262144]
2025-03-06 13:56:00,870 - DEBUG - Calling on_part_data with data[0:74917]
2025-03-06 13:56:00,870 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,870 - DEBUG - Calling on_part_data with data[74918:95009]
2025-03-06 13:56:00,870 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,870 - DEBUG - Calling on_part_data with data[95010:167609]
2025-03-06 13:56:00,870 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,871 - DEBUG - Calling on_part_data with data[167610:262144]
2025-03-06 13:56:00,875 - DEBUG - Calling on_part_data with data[0:12979]
2025-03-06 13:56:00,875 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,875 - DEBUG - Calling on_part_data with data[12980:45058]
2025-03-06 13:56:00,876 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,876 - DEBUG - Calling on_part_data with data[45059:80167]
2025-03-06 13:56:00,876 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:56:00,876 - DEBUG - Calling on_part_data with data[80168:88092]
2025-03-06 13:56:00,876 - DEBUG - Calling on_part_end with no data
2025-03-06 13:56:00,876 - DEBUG - Calling on_end with no data
2025-03-06 13:56:00,880 - INFO - Received audio file: test.mp3
2025-03-06 13:56:00,881 - DEBUG - Created directories - Input: temp/uploads/994c4ec6-640a-402c-95b1-dd13344e49b1.wav, Output: temp/separated/994c4ec6-640a-402c-95b1-dd13344e49b1
2025-03-06 13:56:00,881 - DEBUG - Read file content, size: 3232958 bytes
2025-03-06 13:56:00,907 - INFO - Saved uploaded file to temp/uploads/994c4ec6-640a-402c-95b1-dd13344e49b1.wav
2025-03-06 13:56:01,778 - DEBUG - Audio file loaded successfully, shape: torch.Size([1, 2, 8908200])
2025-03-06 13:56:01,778 - INFO - Starting audio separation...
2025-03-06 13:57:35,371 - INFO - Audio separation completed successfully
2025-03-06 13:57:35,374 - DEBUG - Audio tensor shape before saving: torch.Size([4, 2, 8908200])
2025-03-06 13:57:35,374 - ERROR - Error saving track drums: Expected 2D Tensor, got 3D., audio shape: torch.Size([4, 2, 8908200])
2025-03-06 13:57:35,374 - ERROR - Unexpected error: 
Traceback (most recent call last):
  File "/Users/alan/code/audio-jam/src/backend/main.py", line 108, in separate_audio
    torchaudio.save(out_path, audio, model.samplerate)
  File "/opt/anaconda3/envs/audio-env/lib/python3.9/site-packages/torchaudio/_backend/utils.py", line 313, in save
    return backend.save(
  File "/opt/anaconda3/envs/audio-env/lib/python3.9/site-packages/torchaudio/_backend/soundfile.py", line 44, in save
    soundfile_backend.save(
  File "/opt/anaconda3/envs/audio-env/lib/python3.9/site-packages/torchaudio/_backend/soundfile_backend.py", line 427, in save
    raise ValueError(f"Expected 2D Tensor, got {src.ndim}D.")
ValueError: Expected 2D Tensor, got 3D.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/alan/code/audio-jam/src/backend/main.py", line 113, in separate_audio
    raise HTTPException(status_code=500, detail=f"保存音轨 {source} 失败")
fastapi.exceptions.HTTPException
2025-03-06 13:57:35,379 - DEBUG - Cleaned up input file: temp/uploads/994c4ec6-640a-402c-95b1-dd13344e49b1.wav
2025-03-06 13:58:38,435 - INFO - Starting application with directories:
2025-03-06 13:58:38,435 - INFO - Upload directory: /Users/alan/code/audio-jam/src/backend/temp/uploads
2025-03-06 13:58:38,436 - INFO - Output directory: /Users/alan/code/audio-jam/src/backend/temp/separated
2025-03-06 13:58:38,755 - INFO - Model loaded successfully. Using device: cpu
2025-03-06 13:58:50,194 - DEBUG - Calling on_part_begin with no data
2025-03-06 13:58:50,195 - DEBUG - Calling on_header_field with data[42:61]
2025-03-06 13:58:50,195 - DEBUG - Calling on_header_value with data[63:107]
2025-03-06 13:58:50,195 - DEBUG - Calling on_header_end with no data
2025-03-06 13:58:50,195 - DEBUG - Calling on_header_field with data[109:121]
2025-03-06 13:58:50,195 - DEBUG - Calling on_header_value with data[123:133]
2025-03-06 13:58:50,195 - DEBUG - Calling on_header_end with no data
2025-03-06 13:58:50,195 - DEBUG - Calling on_headers_finished with no data
2025-03-06 13:58:50,195 - DEBUG - Calling on_part_data with data[137:16160]
2025-03-06 13:58:50,195 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,196 - DEBUG - Calling on_part_data with data[16161:130402]
2025-03-06 13:58:50,196 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,196 - DEBUG - Calling on_part_data with data[130403:148057]
2025-03-06 13:58:50,196 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,196 - DEBUG - Calling on_part_data with data[148058:177957]
2025-03-06 13:58:50,196 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,197 - DEBUG - Calling on_part_data with data[177958:261419]
2025-03-06 13:58:50,197 - DEBUG - Calling on_part_data with data[0:29067]
2025-03-06 13:58:50,197 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,198 - DEBUG - Calling on_part_data with data[29068:171980]
2025-03-06 13:58:50,198 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,198 - DEBUG - Calling on_part_data with data[171981:197711]
2025-03-06 13:58:50,198 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,198 - DEBUG - Calling on_part_data with data[197712:247616]
2025-03-06 13:58:50,198 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,198 - DEBUG - Calling on_part_data with data[247617:262144]
2025-03-06 13:58:50,198 - DEBUG - Calling on_part_data with data[0:59639]
2025-03-06 13:58:50,199 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,199 - DEBUG - Calling on_part_data with data[59640:231129]
2025-03-06 13:58:50,199 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,199 - DEBUG - Calling on_part_data with data[231130:231891]
2025-03-06 13:58:50,199 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,199 - DEBUG - Calling on_part_data with data[231892:243303]
2025-03-06 13:58:50,199 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,199 - DEBUG - Calling on_part_data with data[243304:262144]
2025-03-06 13:58:50,200 - DEBUG - Calling on_part_data with data[0:8000]
2025-03-06 13:58:50,200 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,200 - DEBUG - Calling on_part_data with data[8001:82797]
2025-03-06 13:58:50,200 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,200 - DEBUG - Calling on_part_data with data[82798:86462]
2025-03-06 13:58:50,200 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,200 - DEBUG - Calling on_part_data with data[86463:107279]
2025-03-06 13:58:50,200 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,201 - DEBUG - Calling on_part_data with data[107280:262144]
2025-03-06 13:58:50,202 - DEBUG - Calling on_part_data with data[0:7335]
2025-03-06 13:58:50,202 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,202 - DEBUG - Calling on_part_data with data[7336:123220]
2025-03-06 13:58:50,203 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,203 - DEBUG - Calling on_part_data with data[123221:129497]
2025-03-06 13:58:50,203 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,203 - DEBUG - Calling on_part_data with data[129498:169813]
2025-03-06 13:58:50,203 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,204 - DEBUG - Calling on_part_data with data[169814:262144]
2025-03-06 13:58:50,228 - DEBUG - Calling on_part_data with data[0:254151]
2025-03-06 13:58:50,228 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,228 - DEBUG - Calling on_part_data with data[254152:262144]
2025-03-06 13:58:50,232 - DEBUG - Calling on_part_data with data[0:31721]
2025-03-06 13:58:50,232 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,233 - DEBUG - Calling on_part_data with data[31722:53924]
2025-03-06 13:58:50,233 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,233 - DEBUG - Calling on_part_data with data[53925:58810]
2025-03-06 13:58:50,233 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,233 - DEBUG - Calling on_part_data with data[58811:146956]
2025-03-06 13:58:50,233 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,233 - DEBUG - Calling on_part_data with data[146957:238990]
2025-03-06 13:58:50,233 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,233 - DEBUG - Calling on_part_data with data[238991:253831]
2025-03-06 13:58:50,234 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,234 - DEBUG - Calling on_part_data with data[253832:262144]
2025-03-06 13:58:50,237 - DEBUG - Calling on_part_data with data[0:12973]
2025-03-06 13:58:50,237 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,238 - DEBUG - Calling on_part_data with data[12974:141988]
2025-03-06 13:58:50,238 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,238 - DEBUG - Calling on_part_data with data[141989:167534]
2025-03-06 13:58:50,238 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,238 - DEBUG - Calling on_part_data with data[167535:262144]
2025-03-06 13:58:50,242 - DEBUG - Calling on_part_data with data[0:146320]
2025-03-06 13:58:50,243 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,243 - DEBUG - Calling on_part_data with data[146321:200406]
2025-03-06 13:58:50,243 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,243 - DEBUG - Calling on_part_data with data[200407:262144]
2025-03-06 13:58:50,246 - DEBUG - Calling on_part_data with data[0:20610]
2025-03-06 13:58:50,246 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,246 - DEBUG - Calling on_part_data with data[20611:61205]
2025-03-06 13:58:50,246 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,246 - DEBUG - Calling on_part_data with data[61206:218017]
2025-03-06 13:58:50,246 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,246 - DEBUG - Calling on_part_data with data[218018:220718]
2025-03-06 13:58:50,246 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,247 - DEBUG - Calling on_part_data with data[220719:234282]
2025-03-06 13:58:50,247 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,247 - DEBUG - Calling on_part_data with data[234283:253162]
2025-03-06 13:58:50,247 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,247 - DEBUG - Calling on_part_data with data[253163:262108]
2025-03-06 13:58:50,247 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,247 - DEBUG - Calling on_part_data with data[262109:262142]
2025-03-06 13:58:50,247 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,248 - DEBUG - Calling on_part_data with data[262143:262144]
2025-03-06 13:58:50,252 - DEBUG - Calling on_part_data with data[0:12302]
2025-03-06 13:58:50,252 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,252 - DEBUG - Calling on_part_data with data[12303:12891]
2025-03-06 13:58:50,252 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,253 - DEBUG - Calling on_part_data with data[12892:135798]
2025-03-06 13:58:50,253 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,253 - DEBUG - Calling on_part_data with data[135799:262134]
2025-03-06 13:58:50,253 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,253 - DEBUG - Calling on_part_data with data[262135:262144]
2025-03-06 13:58:50,258 - DEBUG - Calling on_part_data with data[0:66308]
2025-03-06 13:58:50,258 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,258 - DEBUG - Calling on_part_data with data[66309:167609]
2025-03-06 13:58:50,258 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,258 - DEBUG - Calling on_part_data with data[167610:173713]
2025-03-06 13:58:50,258 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,258 - DEBUG - Calling on_part_data with data[173714:191282]
2025-03-06 13:58:50,258 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,259 - DEBUG - Calling on_part_data with data[191283:257047]
2025-03-06 13:58:50,259 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,259 - DEBUG - Calling on_part_data with data[257048:262144]
2025-03-06 13:58:50,263 - DEBUG - Calling on_part_data with data[0:29471]
2025-03-06 13:58:50,263 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,263 - DEBUG - Calling on_part_data with data[29472:65659]
2025-03-06 13:58:50,263 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,264 - DEBUG - Calling on_part_data with data[65660:82674]
2025-03-06 13:58:50,264 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,264 - DEBUG - Calling on_part_data with data[82675:87690]
2025-03-06 13:58:50,264 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 13:58:50,264 - DEBUG - Calling on_part_data with data[87691:88092]
2025-03-06 13:58:50,264 - DEBUG - Calling on_part_end with no data
2025-03-06 13:58:50,264 - DEBUG - Calling on_end with no data
2025-03-06 13:58:50,266 - INFO - Received audio file: test.mp3
2025-03-06 13:58:50,267 - DEBUG - Created directories - Input: temp/uploads/f9128d85-12d5-4ca6-96fc-c807a8586fde.wav, Output: temp/separated/f9128d85-12d5-4ca6-96fc-c807a8586fde
2025-03-06 13:58:50,267 - DEBUG - Read file content, size: 3232958 bytes
2025-03-06 13:58:50,285 - INFO - Saved uploaded file to temp/uploads/f9128d85-12d5-4ca6-96fc-c807a8586fde.wav
2025-03-06 13:58:51,286 - DEBUG - Audio file loaded successfully, shape: torch.Size([1, 2, 8908200])
2025-03-06 13:58:51,286 - INFO - Starting audio separation...
2025-03-06 14:00:27,895 - INFO - Audio separation completed successfully
2025-03-06 14:00:27,897 - DEBUG - Original audio tensor shape: torch.Size([4, 2, 8908200])
2025-03-06 14:00:27,908 - DEBUG - Processed audio tensor shape: torch.Size([2, 8908200])
2025-03-06 14:00:28,047 - DEBUG - Saved track drums to temp/separated/f9128d85-12d5-4ca6-96fc-c807a8586fde/drums.wav
2025-03-06 14:00:28,047 - INFO - All tracks saved successfully: {'drums': '/audio/f9128d85-12d5-4ca6-96fc-c807a8586fde/drums.wav'}
2025-03-06 14:00:28,079 - DEBUG - Cleaned up input file: temp/uploads/f9128d85-12d5-4ca6-96fc-c807a8586fde.wav
2025-03-06 16:04:58,743 - INFO - Starting application with directories:
2025-03-06 16:04:58,743 - INFO - Upload directory: /Users/alan/code/audio-jam/src/backend/temp/uploads
2025-03-06 16:04:58,744 - INFO - Output directory: /Users/alan/code/audio-jam/src/backend/temp/separated
2025-03-06 16:04:58,960 - INFO - Model loaded successfully. Using device: cpu
2025-03-06 16:06:25,343 - INFO - Starting application with directories:
2025-03-06 16:06:25,343 - INFO - Upload directory: /Users/alan/code/audio-jam/src/backend/temp/uploads
2025-03-06 16:06:25,344 - INFO - Output directory: /Users/alan/code/audio-jam/src/backend/temp/separated
2025-03-06 16:06:25,578 - INFO - Model loaded successfully. Using device: cpu
2025-03-06 16:07:11,926 - DEBUG - Calling on_part_begin with no data
2025-03-06 16:07:11,926 - DEBUG - Calling on_header_field with data[42:61]
2025-03-06 16:07:11,927 - DEBUG - Calling on_header_value with data[63:107]
2025-03-06 16:07:11,927 - DEBUG - Calling on_header_end with no data
2025-03-06 16:07:11,927 - DEBUG - Calling on_header_field with data[109:121]
2025-03-06 16:07:11,927 - DEBUG - Calling on_header_value with data[123:133]
2025-03-06 16:07:11,927 - DEBUG - Calling on_header_end with no data
2025-03-06 16:07:11,927 - DEBUG - Calling on_headers_finished with no data
2025-03-06 16:07:11,927 - DEBUG - Calling on_part_data with data[137:24489]
2025-03-06 16:07:11,927 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,927 - DEBUG - Calling on_part_data with data[24490:77649]
2025-03-06 16:07:11,927 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,927 - DEBUG - Calling on_part_data with data[77650:137529]
2025-03-06 16:07:11,927 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,928 - DEBUG - Calling on_part_data with data[137530:169304]
2025-03-06 16:07:11,928 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,928 - DEBUG - Calling on_part_data with data[169305:217656]
2025-03-06 16:07:11,928 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,928 - DEBUG - Calling on_part_data with data[217657:261419]
2025-03-06 16:07:11,929 - DEBUG - Calling on_part_data with data[0:105641]
2025-03-06 16:07:11,929 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,929 - DEBUG - Calling on_part_data with data[105642:160405]
2025-03-06 16:07:11,929 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,929 - DEBUG - Calling on_part_data with data[160406:176752]
2025-03-06 16:07:11,929 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,929 - DEBUG - Calling on_part_data with data[176753:252045]
2025-03-06 16:07:11,930 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,930 - DEBUG - Calling on_part_data with data[252046:262144]
2025-03-06 16:07:11,930 - DEBUG - Calling on_part_data with data[0:27091]
2025-03-06 16:07:11,930 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,931 - DEBUG - Calling on_part_data with data[27092:147695]
2025-03-06 16:07:11,931 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,931 - DEBUG - Calling on_part_data with data[147696:262144]
2025-03-06 16:07:11,932 - DEBUG - Calling on_part_data with data[0:145734]
2025-03-06 16:07:11,932 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,932 - DEBUG - Calling on_part_data with data[145735:168695]
2025-03-06 16:07:11,932 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,932 - DEBUG - Calling on_part_data with data[168696:262144]
2025-03-06 16:07:11,933 - DEBUG - Calling on_part_data with data[0:32472]
2025-03-06 16:07:11,933 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,933 - DEBUG - Calling on_part_data with data[32473:129497]
2025-03-06 16:07:11,933 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,934 - DEBUG - Calling on_part_data with data[129498:262144]
2025-03-06 16:07:11,957 - DEBUG - Calling on_part_data with data[0:36031]
2025-03-06 16:07:11,957 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,957 - DEBUG - Calling on_part_data with data[36032:83009]
2025-03-06 16:07:11,958 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,959 - DEBUG - Calling on_part_data with data[83010:207543]
2025-03-06 16:07:11,960 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,960 - DEBUG - Calling on_part_data with data[207544:262144]
2025-03-06 16:07:11,963 - DEBUG - Calling on_part_data with data[0:17827]
2025-03-06 16:07:11,964 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,964 - DEBUG - Calling on_part_data with data[17828:46701]
2025-03-06 16:07:11,964 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,964 - DEBUG - Calling on_part_data with data[46702:94751]
2025-03-06 16:07:11,964 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,964 - DEBUG - Calling on_part_data with data[94752:104702]
2025-03-06 16:07:11,964 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,964 - DEBUG - Calling on_part_data with data[104703:132082]
2025-03-06 16:07:11,964 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,964 - DEBUG - Calling on_part_data with data[132083:165101]
2025-03-06 16:07:11,964 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,965 - DEBUG - Calling on_part_data with data[165102:262144]
2025-03-06 16:07:11,970 - DEBUG - Calling on_part_data with data[0:262144]
2025-03-06 16:07:11,972 - DEBUG - Calling on_part_data with data[0:262144]
2025-03-06 16:07:11,974 - DEBUG - Calling on_part_data with data[0:169220]
2025-03-06 16:07:11,974 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:11,974 - DEBUG - Calling on_part_data with data[169221:211585]
2025-03-06 16:07:12,145 - DEBUG - Calling on_part_data with data[0:121511]
2025-03-06 16:07:12,145 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:12,145 - DEBUG - Calling on_part_data with data[121512:147229]
2025-03-06 16:07:12,145 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:12,145 - DEBUG - Calling on_part_data with data[147230:164292]
2025-03-06 16:07:12,145 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:12,145 - DEBUG - Calling on_part_data with data[164293:170574]
2025-03-06 16:07:12,145 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:12,145 - DEBUG - Calling on_part_data with data[170575:202315]
2025-03-06 16:07:12,146 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:12,146 - DEBUG - Calling on_part_data with data[202316:203748]
2025-03-06 16:07:12,146 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:12,146 - DEBUG - Calling on_part_data with data[203749:215124]
2025-03-06 16:07:12,148 - DEBUG - Calling on_part_data with data[0:131987]
2025-03-06 16:07:12,149 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:12,149 - DEBUG - Calling on_part_data with data[131988:157601]
2025-03-06 16:07:12,149 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:12,149 - DEBUG - Calling on_part_data with data[157602:229376]
2025-03-06 16:07:12,302 - DEBUG - Calling on_part_data with data[0:30207]
2025-03-06 16:07:12,303 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:12,303 - DEBUG - Calling on_part_data with data[30208:35812]
2025-03-06 16:07:12,303 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:07:12,305 - DEBUG - Calling on_part_data with data[35813:120280]
2025-03-06 16:07:12,314 - DEBUG - Calling on_part_data with data[0:98159]
2025-03-06 16:07:12,314 - DEBUG - Calling on_part_end with no data
2025-03-06 16:07:12,315 - DEBUG - Calling on_end with no data
2025-03-06 16:07:12,317 - INFO - Received audio file: test.mp3
2025-03-06 16:07:12,317 - DEBUG - Created directories - Input: temp/uploads/737389b2-2979-4635-975e-6b5355568f16.wav, Output: temp/separated/737389b2-2979-4635-975e-6b5355568f16
2025-03-06 16:07:12,318 - DEBUG - Read file content, size: 3232958 bytes
2025-03-06 16:07:12,319 - INFO - Saved uploaded file to temp/uploads/737389b2-2979-4635-975e-6b5355568f16.wav
2025-03-06 16:07:12,319 - INFO - Starting audio separation...
2025-03-06 16:07:12,319 - DEBUG - Running command: python -m demucs.separate -n htdemucs --two-stems=vocals -o temp/separated --filename 737389b2-2979-4635-975e-6b5355568f16/{stem}.{ext} temp/uploads/737389b2-2979-4635-975e-6b5355568f16.wav
2025-03-06 16:08:49,495 - DEBUG - Command output: Selected model is a bag of 1 models. You will see that many progress bars per track.
Separated tracks will be stored in /Users/alan/code/audio-jam/src/backend/temp/separated/htdemucs
Separating track temp/uploads/737389b2-2979-4635-975e-6b5355568f16.wav

2025-03-06 16:08:49,498 - WARNING - Command stderr: 
  0%|                                                                                 | 0.0/204.75 [00:00<?, ?seconds/s]
  3%|██                                                                      | 5.85/204.75 [00:03<02:11,  1.51seconds/s]
  6%|████                                                                    | 11.7/204.75 [00:06<01:43,  1.87seconds/s]
  9%|████▉                                                     | 17.549999999999997/204.75 [00:08<01:30,  2.07seconds/s]
 11%|████████▏                                                               | 23.4/204.75 [00:11<01:26,  2.10seconds/s]
 14%|██████████▏                                                            | 29.25/204.75 [00:14<01:20,  2.19seconds/s]
 17%|█████████▉                                                | 35.099999999999994/204.75 [00:16<01:16,  2.23seconds/s]
 20%|███████████▌                                              | 40.949999999999996/204.75 [00:19<01:13,  2.22seconds/s]
 23%|████████████████▍                                                       | 46.8/204.75 [00:21<01:10,  2.24seconds/s]
 26%|██████████████████▎                                                    | 52.65/204.75 [00:24<01:07,  2.26seconds/s]
 29%|████████████████████▌                                                   | 58.5/204.75 [00:26<01:04,  2.28seconds/s]
 31%|██████████████████████▎                                                | 64.35/204.75 [00:29<01:00,  2.32seconds/s]
 34%|████████████████████▏                                      | 70.19999999999999/204.75 [00:31<00:57,  2.33seconds/s]
 37%|██████████████████████████▎                                            | 76.05/204.75 [00:34<00:56,  2.28seconds/s]
 40%|███████████████████████▌                                   | 81.89999999999999/204.75 [00:37<00:53,  2.29seconds/s]
 43%|██████████████████████████████▍                                        | 87.75/204.75 [00:39<00:50,  2.32seconds/s]
 46%|████████████████████████████████▉                                       | 93.6/204.75 [00:42<00:48,  2.31seconds/s]
 49%|████████████████████████████▋                              | 99.44999999999999/204.75 [00:44<00:46,  2.28seconds/s]
 51%|████████████████████████████████████▌                                  | 105.3/204.75 [00:47<00:43,  2.30seconds/s]
 54%|███████████████████████████████▍                          | 111.14999999999999/204.75 [00:49<00:40,  2.33seconds/s]
 57%|████████████████████████████████████████▌                              | 117.0/204.75 [00:52<00:37,  2.34seconds/s]
 60%|██████████████████████████████████████████                            | 122.85/204.75 [00:54<00:35,  2.33seconds/s]
 63%|████████████████████████████████████████████▋                          | 128.7/204.75 [00:57<00:35,  2.12seconds/s]
 66%|██████████████████████████████████████                    | 134.54999999999998/204.75 [01:00<00:33,  2.11seconds/s]
 69%|███████████████████████████████████████▊                  | 140.39999999999998/204.75 [01:03<00:30,  2.12seconds/s]
 71%|██████████████████████████████████████████████████                    | 146.25/204.75 [01:06<00:27,  2.15seconds/s]
 74%|████████████████████████████████████████████████████▋                  | 152.1/204.75 [01:08<00:24,  2.17seconds/s]
 77%|█████████████████████████████████████████████████████▉                | 157.95/204.75 [01:11<00:21,  2.22seconds/s]
 80%|██████████████████████████████████████████████▍           | 163.79999999999998/204.75 [01:13<00:18,  2.24seconds/s]
 83%|████████████████████████████████████████████████          | 169.64999999999998/204.75 [01:16<00:15,  2.26seconds/s]
 86%|████████████████████████████████████████████████████████████▊          | 175.5/204.75 [01:19<00:13,  2.23seconds/s]
 89%|██████████████████████████████████████████████████████████████        | 181.35/204.75 [01:21<00:10,  2.26seconds/s]
 91%|████████████████████████████████████████████████████████████████▉      | 187.2/204.75 [01:24<00:07,  2.27seconds/s]
 94%|██████████████████████████████████████████████████████▋   | 193.04999999999998/204.75 [01:26<00:05,  2.26seconds/s]
 97%|████████████████████████████████████████████████████████▎ | 198.89999999999998/204.75 [01:29<00:02,  2.23seconds/s]
100%|██████████████████████████████████████████████████████████████████████| 204.75/204.75 [01:31<00:00,  2.28seconds/s]
100%|██████████████████████████████████████████████████████████████████████| 204.75/204.75 [01:31<00:00,  2.23seconds/s]

2025-03-06 16:08:49,500 - INFO - Audio separation completed successfully
2025-03-06 16:08:49,501 - WARNING - Expected track not found: temp/separated/737389b2-2979-4635-975e-6b5355568f16/vocals.wav
2025-03-06 16:08:49,501 - WARNING - Expected track not found: temp/separated/737389b2-2979-4635-975e-6b5355568f16/no_vocals.wav
2025-03-06 16:08:49,501 - INFO - All tracks saved successfully: {}
2025-03-06 16:08:49,503 - DEBUG - Cleaned up input file: temp/uploads/737389b2-2979-4635-975e-6b5355568f16.wav
2025-03-06 16:12:36,211 - INFO - Starting application with directories:
2025-03-06 16:12:36,211 - INFO - Upload directory: /Users/alan/code/audio-jam/src/backend/temp/uploads
2025-03-06 16:12:36,211 - INFO - Output directory: /Users/alan/code/audio-jam/src/backend/temp/separated
2025-03-06 16:12:36,419 - INFO - Model loaded successfully. Using device: cpu
2025-03-06 16:12:47,226 - DEBUG - Calling on_part_begin with no data
2025-03-06 16:12:47,227 - DEBUG - Calling on_header_field with data[42:61]
2025-03-06 16:12:47,227 - DEBUG - Calling on_header_value with data[63:107]
2025-03-06 16:12:47,227 - DEBUG - Calling on_header_end with no data
2025-03-06 16:12:47,227 - DEBUG - Calling on_header_field with data[109:121]
2025-03-06 16:12:47,227 - DEBUG - Calling on_header_value with data[123:133]
2025-03-06 16:12:47,227 - DEBUG - Calling on_header_end with no data
2025-03-06 16:12:47,227 - DEBUG - Calling on_headers_finished with no data
2025-03-06 16:12:47,228 - DEBUG - Calling on_part_data with data[137:107671]
2025-03-06 16:12:47,228 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,228 - DEBUG - Calling on_part_data with data[107672:123625]
2025-03-06 16:12:47,228 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,228 - DEBUG - Calling on_part_data with data[123626:219809]
2025-03-06 16:12:47,228 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,229 - DEBUG - Calling on_part_data with data[219810:247051]
2025-03-06 16:12:47,229 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,229 - DEBUG - Calling on_part_data with data[247052:261419]
2025-03-06 16:12:47,229 - DEBUG - Calling on_part_data with data[0:29067]
2025-03-06 16:12:47,229 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,230 - DEBUG - Calling on_part_data with data[29068:252045]
2025-03-06 16:12:47,230 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,230 - DEBUG - Calling on_part_data with data[252046:262144]
2025-03-06 16:12:47,231 - DEBUG - Calling on_part_data with data[0:64124]
2025-03-06 16:12:47,231 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,231 - DEBUG - Calling on_part_data with data[64125:75156]
2025-03-06 16:12:47,231 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,231 - DEBUG - Calling on_part_data with data[75157:147125]
2025-03-06 16:12:47,231 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,231 - DEBUG - Calling on_part_data with data[147126:207237]
2025-03-06 16:12:47,231 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,231 - DEBUG - Calling on_part_data with data[207238:243303]
2025-03-06 16:12:47,231 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,232 - DEBUG - Calling on_part_data with data[243304:262144]
2025-03-06 16:12:47,232 - DEBUG - Calling on_part_data with data[0:188585]
2025-03-06 16:12:47,233 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,233 - DEBUG - Calling on_part_data with data[188586:208207]
2025-03-06 16:12:47,233 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,233 - DEBUG - Calling on_part_data with data[208208:262144]
2025-03-06 16:12:47,233 - DEBUG - Calling on_part_data with data[0:103366]
2025-03-06 16:12:47,233 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,234 - DEBUG - Calling on_part_data with data[103367:226418]
2025-03-06 16:12:47,234 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,234 - DEBUG - Calling on_part_data with data[226419:255628]
2025-03-06 16:12:47,234 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,234 - DEBUG - Calling on_part_data with data[255629:262144]
2025-03-06 16:12:47,244 - DEBUG - Calling on_part_data with data[0:131797]
2025-03-06 16:12:47,604 - DEBUG - Calling on_part_data with data[0:122354]
2025-03-06 16:12:47,604 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,605 - DEBUG - Calling on_part_data with data[122355:174844]
2025-03-06 16:12:47,605 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,605 - DEBUG - Calling on_part_data with data[174845:262144]
2025-03-06 16:12:47,608 - DEBUG - Calling on_part_data with data[0:89546]
2025-03-06 16:12:47,608 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,609 - DEBUG - Calling on_part_data with data[89547:262144]
2025-03-06 16:12:47,610 - DEBUG - Calling on_part_data with data[0:62387]
2025-03-06 16:12:47,610 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,611 - DEBUG - Calling on_part_data with data[62388:87294]
2025-03-06 16:12:47,611 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,611 - DEBUG - Calling on_part_data with data[87295:262144]
2025-03-06 16:12:47,613 - DEBUG - Calling on_part_data with data[0:48183]
2025-03-06 16:12:47,613 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,613 - DEBUG - Calling on_part_data with data[48184:66304]
2025-03-06 16:12:47,613 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,613 - DEBUG - Calling on_part_data with data[66305:99882]
2025-03-06 16:12:47,613 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,613 - DEBUG - Calling on_part_data with data[99883:210988]
2025-03-06 16:12:47,613 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,613 - DEBUG - Calling on_part_data with data[210989:262144]
2025-03-06 16:12:47,615 - DEBUG - Calling on_part_data with data[0:197837]
2025-03-06 16:12:47,615 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,615 - DEBUG - Calling on_part_data with data[197838:230988]
2025-03-06 16:12:47,616 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,616 - DEBUG - Calling on_part_data with data[230989:249364]
2025-03-06 16:12:47,616 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,616 - DEBUG - Calling on_part_data with data[249365:262144]
2025-03-06 16:12:47,618 - DEBUG - Calling on_part_data with data[0:12716]
2025-03-06 16:12:47,618 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,618 - DEBUG - Calling on_part_data with data[12717:89814]
2025-03-06 16:12:47,618 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,618 - DEBUG - Calling on_part_data with data[89815:155826]
2025-03-06 16:12:47,618 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,618 - DEBUG - Calling on_part_data with data[155827:172893]
2025-03-06 16:12:47,618 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,619 - DEBUG - Calling on_part_data with data[172894:196655]
2025-03-06 16:12:47,619 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,619 - DEBUG - Calling on_part_data with data[196656:262144]
2025-03-06 16:12:47,621 - DEBUG - Calling on_part_data with data[0:175405]
2025-03-06 16:12:47,621 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,621 - DEBUG - Calling on_part_data with data[175406:194829]
2025-03-06 16:12:47,621 - DEBUG - Calling on_part_data with data[0:1]
2025-03-06 16:12:47,621 - DEBUG - Calling on_part_data with data[194830:218439]
2025-03-06 16:12:47,621 - DEBUG - Calling on_part_end with no data
2025-03-06 16:12:47,621 - DEBUG - Calling on_end with no data
2025-03-06 16:12:47,623 - INFO - Received audio file: test.mp3
2025-03-06 16:12:47,623 - DEBUG - Created directories - Input: temp/uploads/43e76be2-804a-40c8-a0aa-935950c34b73.wav, Output: temp/separated/43e76be2-804a-40c8-a0aa-935950c34b73
2025-03-06 16:12:47,624 - DEBUG - Read file content, size: 3232958 bytes
2025-03-06 16:12:47,626 - INFO - Saved uploaded file to temp/uploads/43e76be2-804a-40c8-a0aa-935950c34b73.wav
2025-03-06 16:12:47,626 - INFO - Starting audio separation...
2025-03-06 16:12:47,626 - DEBUG - Running command: python -m demucs.separate -n htdemucs -o temp/separated temp/uploads/43e76be2-804a-40c8-a0aa-935950c34b73.wav
2025-03-06 16:14:20,815 - DEBUG - Command output: Selected model is a bag of 1 models. You will see that many progress bars per track.
Separated tracks will be stored in /Users/alan/code/audio-jam/src/backend/temp/separated/htdemucs
Separating track temp/uploads/43e76be2-804a-40c8-a0aa-935950c34b73.wav

2025-03-06 16:14:20,816 - WARNING - Command stderr: 
  0%|                                                                                 | 0.0/204.75 [00:00<?, ?seconds/s]
  3%|██                                                                      | 5.85/204.75 [00:03<02:00,  1.65seconds/s]
  6%|████                                                                    | 11.7/204.75 [00:06<01:36,  1.99seconds/s]
  9%|████▉                                                     | 17.549999999999997/204.75 [00:08<01:26,  2.17seconds/s]
 11%|████████▏                                                               | 23.4/204.75 [00:10<01:19,  2.29seconds/s]
 14%|██████████▏                                                            | 29.25/204.75 [00:13<01:14,  2.35seconds/s]
 17%|█████████▉                                                | 35.099999999999994/204.75 [00:15<01:11,  2.36seconds/s]
 20%|███████████▌                                              | 40.949999999999996/204.75 [00:17<01:08,  2.41seconds/s]
 23%|████████████████▍                                                       | 46.8/204.75 [00:20<01:06,  2.37seconds/s]
 26%|██████████████████▎                                                    | 52.65/204.75 [00:22<01:04,  2.37seconds/s]
 29%|████████████████████▌                                                   | 58.5/204.75 [00:25<01:03,  2.31seconds/s]
 31%|██████████████████████▎                                                | 64.35/204.75 [00:28<00:59,  2.34seconds/s]
 34%|████████████████████▏                                      | 70.19999999999999/204.75 [00:30<00:57,  2.35seconds/s]
 37%|██████████████████████████▎                                            | 76.05/204.75 [00:32<00:53,  2.39seconds/s]
 40%|███████████████████████▌                                   | 81.89999999999999/204.75 [00:35<00:52,  2.34seconds/s]
 43%|██████████████████████████████▍                                        | 87.75/204.75 [00:38<00:50,  2.32seconds/s]
 46%|████████████████████████████████▉                                       | 93.6/204.75 [00:40<00:46,  2.37seconds/s]
 49%|████████████████████████████▋                              | 99.44999999999999/204.75 [00:42<00:43,  2.40seconds/s]
 51%|████████████████████████████████████▌                                  | 105.3/204.75 [00:45<00:41,  2.39seconds/s]
 54%|███████████████████████████████▍                          | 111.14999999999999/204.75 [00:47<00:39,  2.38seconds/s]
 57%|████████████████████████████████████████▌                              | 117.0/204.75 [00:50<00:37,  2.34seconds/s]
 60%|██████████████████████████████████████████                            | 122.85/204.75 [00:52<00:34,  2.34seconds/s]
 63%|████████████████████████████████████████████▋                          | 128.7/204.75 [00:55<00:32,  2.34seconds/s]
 66%|██████████████████████████████████████                    | 134.54999999999998/204.75 [00:57<00:29,  2.39seconds/s]
 69%|███████████████████████████████████████▊                  | 140.39999999999998/204.75 [01:00<00:27,  2.30seconds/s]
 71%|██████████████████████████████████████████████████                    | 146.25/204.75 [01:02<00:25,  2.33seconds/s]
 74%|████████████████████████████████████████████████████▋                  | 152.1/204.75 [01:05<00:22,  2.29seconds/s]
 77%|█████████████████████████████████████████████████████▉                | 157.95/204.75 [01:08<00:20,  2.27seconds/s]
 80%|██████████████████████████████████████████████▍           | 163.79999999999998/204.75 [01:10<00:17,  2.32seconds/s]
 83%|████████████████████████████████████████████████          | 169.64999999999998/204.75 [01:13<00:15,  2.33seconds/s]
 86%|████████████████████████████████████████████████████████████▊          | 175.5/204.75 [01:15<00:13,  2.23seconds/s]
 89%|██████████████████████████████████████████████████████████████        | 181.35/204.75 [01:18<00:10,  2.22seconds/s]
 91%|████████████████████████████████████████████████████████████████▉      | 187.2/204.75 [01:21<00:07,  2.21seconds/s]
 94%|██████████████████████████████████████████████████████▋   | 193.04999999999998/204.75 [01:23<00:05,  2.22seconds/s]
 97%|████████████████████████████████████████████████████████▎ | 198.89999999999998/204.75 [01:26<00:02,  2.22seconds/s]
100%|██████████████████████████████████████████████████████████████████████| 204.75/204.75 [01:29<00:00,  2.20seconds/s]
100%|██████████████████████████████████████████████████████████████████████| 204.75/204.75 [01:29<00:00,  2.29seconds/s]

2025-03-06 16:14:20,817 - INFO - Audio separation completed successfully
2025-03-06 16:14:20,818 - DEBUG - Found potential output directories: ['temp/separated/htdemucs/737389b2-2979-4635-975e-6b5355568f16', 'temp/separated/htdemucs/43e76be2-804a-40c8-a0aa-935950c34b73']
2025-03-06 16:14:20,818 - DEBUG - Found wav files in temp/separated/htdemucs/737389b2-2979-4635-975e-6b5355568f16: ['temp/separated/htdemucs/737389b2-2979-4635-975e-6b5355568f16/vocals.wav', 'temp/separated/htdemucs/737389b2-2979-4635-975e-6b5355568f16/no_vocals.wav']
2025-03-06 16:14:21,113 - DEBUG - Found and copied track: vocals from temp/separated/htdemucs/737389b2-2979-4635-975e-6b5355568f16/vocals.wav to temp/separated/43e76be2-804a-40c8-a0aa-935950c34b73/vocals.wav
2025-03-06 16:14:21,398 - DEBUG - Found and copied track: no_vocals from temp/separated/htdemucs/737389b2-2979-4635-975e-6b5355568f16/no_vocals.wav to temp/separated/43e76be2-804a-40c8-a0aa-935950c34b73/no_vocals.wav
2025-03-06 16:14:21,399 - DEBUG - Found wav files in temp/separated/htdemucs/43e76be2-804a-40c8-a0aa-935950c34b73: ['temp/separated/htdemucs/43e76be2-804a-40c8-a0aa-935950c34b73/drums.wav', 'temp/separated/htdemucs/43e76be2-804a-40c8-a0aa-935950c34b73/vocals.wav', 'temp/separated/htdemucs/43e76be2-804a-40c8-a0aa-935950c34b73/other.wav', 'temp/separated/htdemucs/43e76be2-804a-40c8-a0aa-935950c34b73/bass.wav']
2025-03-06 16:14:21,568 - DEBUG - Found and copied track: drums from temp/separated/htdemucs/43e76be2-804a-40c8-a0aa-935950c34b73/drums.wav to temp/separated/43e76be2-804a-40c8-a0aa-935950c34b73/drums.wav
2025-03-06 16:14:21,758 - DEBUG - Found and copied track: vocals from temp/separated/htdemucs/43e76be2-804a-40c8-a0aa-935950c34b73/vocals.wav to temp/separated/43e76be2-804a-40c8-a0aa-935950c34b73/vocals.wav
2025-03-06 16:14:21,919 - DEBUG - Found and copied track: other from temp/separated/htdemucs/43e76be2-804a-40c8-a0aa-935950c34b73/other.wav to temp/separated/43e76be2-804a-40c8-a0aa-935950c34b73/other.wav
2025-03-06 16:14:22,061 - DEBUG - Found and copied track: bass from temp/separated/htdemucs/43e76be2-804a-40c8-a0aa-935950c34b73/bass.wav to temp/separated/43e76be2-804a-40c8-a0aa-935950c34b73/bass.wav
2025-03-06 16:14:22,061 - INFO - All tracks saved successfully: {'vocals': '/audio/43e76be2-804a-40c8-a0aa-935950c34b73/vocals.wav', 'no_vocals': '/audio/43e76be2-804a-40c8-a0aa-935950c34b73/no_vocals.wav', 'drums': '/audio/43e76be2-804a-40c8-a0aa-935950c34b73/drums.wav', 'other': '/audio/43e76be2-804a-40c8-a0aa-935950c34b73/other.wav', 'bass': '/audio/43e76be2-804a-40c8-a0aa-935950c34b73/bass.wav'}
2025-03-06 16:14:22,063 - DEBUG - Cleaned up input file: temp/uploads/43e76be2-804a-40c8-a0aa-935950c34b73.wav
